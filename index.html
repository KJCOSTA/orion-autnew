<!DOCTYPE html>
<html lang="pt-BR" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ORION • Omniverse Command</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600;700;800&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                fontFamily: { sans: ['"Space Grotesk"', 'sans-serif'], serif: ['Cinzel', 'serif'] },
                extend: {
                    colors: {
                        void: { 900: '#030712', 800: '#0B1120', 700: '#162032' }, 
                        gold: { 300: '#FDE047', 400: '#FACC15', 500: '#EAB308', 600: '#CA8A04' },
                        cyber: { 400: '#22D3EE', 500: '#06B6D4' }
                    },
                    backgroundImage: {
                        'cosmic': 'radial-gradient(circle at 50% -20%, #172033 0%, #030712 60%)',
                        'glass': 'linear-gradient(180deg, rgba(17, 24, 39, 0.7) 0%, rgba(3, 7, 18, 0.8) 100%)',
                        'card-shine': 'linear-gradient(45deg, transparent 25%, rgba(255,255,255,0.03) 50%, transparent 75%)'
                    },
                    animation: {
                        'enter': 'enter 0.6s ease-out forwards',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'float': 'float 6s ease-in-out infinite'
                    },
                    keyframes: {
                        enter: { '0%': { opacity: '0', transform: 'translateY(20px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } },
                        float: { '0%, 100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-10px)' } }
                    }
                }
            }
        }
    </script>

    <style>
        /* GLASSMORPHISM & UTILS */
        .glass-panel {
            background: rgba(11, 17, 32, 0.65);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }
        .glass-panel:hover {
            border-color: rgba(250, 204, 21, 0.2);
            box-shadow: 0 8px 32px rgba(250, 204, 21, 0.05);
        }
        
        .text-glow { text-shadow: 0 0 20px rgba(250, 204, 21, 0.3); }
        .border-glow { box-shadow: 0 0 15px rgba(250, 204, 21, 0.1); }
        
        /* SCROLLBAR */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #030712; }
        ::-webkit-scrollbar-thumb { background: #1f2937; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #EAB308; }

        /* LOADER */
        .loader-ring {
            display: inline-block; width: 64px; height: 64px;
        }
        .loader-ring:after {
            content: " "; display: block; width: 48px; height: 48px; margin: 8px; border-radius: 50%;
            border: 2px solid #FACC15; border-color: #FACC15 transparent #FACC15 transparent;
            animation: loader-spin 1.2s linear infinite;
        }
        @keyframes loader-spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>

<body class="bg-void-900 text-slate-300 font-sans min-h-screen bg-cosmic selection:bg-gold-500 selection:text-void-900 overflow-x-hidden">

    <div id="app" class="relative">

        <transition name="fade">
            <div v-if="loading" class="fixed inset-0 z-50 flex flex-col items-center justify-center bg-void-900 bg-cosmic">
                <div class="loader-ring mb-6"></div>
                <h2 class="font-serif text-2xl text-gold-400 tracking-[0.3em] animate-pulse">CARREGANDO SISTEMA ORION</h2>
                <p class="text-xs text-slate-500 mt-2 font-mono">Sincronizando JSONs canônicos...</p>
            </div>
        </transition>

        <div v-else class="max-w-7xl mx-auto p-4 md:p-8 space-y-12 pb-24 animate-enter">
            
            <header class="flex flex-col md:flex-row justify-between items-end border-b border-white/5 pb-6 gap-6">
                <div class="w-full md:w-auto">
                    <div class="flex items-center gap-4 mb-2">
                        <div class="w-12 h-12 rounded-lg bg-gradient-to-br from-gold-600 to-void-900 flex items-center justify-center border border-gold-500/30 shadow-[0_0_30px_rgba(234,179,8,0.2)]">
                            <i class="ph-fill ph-star-four text-2xl text-white"></i>
                        </div>
                        <div>
                            <h1 class="text-4xl md:text-5xl font-serif text-white tracking-wide text-glow">ORION</h1>
                            <div class="flex items-center gap-2">
                                <span class="h-[1px] w-8 bg-gold-500"></span>
                                <span class="text-[10px] uppercase tracking-[0.2em] text-gold-500">System Governance v3.0</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="flex items-center gap-6">
                    <div class="glass-panel px-5 py-2 rounded-full flex items-center gap-3">
                        <div class="relative flex h-3 w-3">
                            <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                            <span class="relative inline-flex rounded-full h-3 w-3 bg-green-500"></span>
                        </div>
                        <div class="flex flex-col text-right">
                            <span class="text-[10px] uppercase text-slate-500 font-bold">Status do Sistema</span>
                            <span class="text-xs font-mono text-white">{{ project?.status || 'OFFLINE' }}</span>
                        </div>
                    </div>
                </div>
            </header>

            <section class="grid grid-cols-1 md:grid-cols-12 gap-6">
                
                <div class="col-span-1 md:col-span-4 glass-panel rounded-2xl p-8 relative overflow-hidden group">
                    <div class="absolute inset-0 bg-gradient-to-br from-gold-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-700"></div>
                    <i class="ph-duotone ph-flag-banner absolute -right-6 -top-6 text-9xl text-white/5 group-hover:text-white/10 transition-colors rotate-12"></i>
                    
                    <h3 class="text-xs font-bold text-gold-500 uppercase tracking-widest mb-4 flex items-center gap-2">
                        <i class="ph-fill ph-crosshair"></i> Foco Estratégico
                    </h3>
                    <div class="text-4xl text-white font-serif font-bold mb-2">{{ project?.fase_atual }}</div>
                    <p class="text-sm text-slate-400 leading-relaxed max-w-[80%]">
                        O sistema está operando em modo de organização e inventário. Nenhuma ação executiva permitida.
                    </p>
                </div>

                <div class="col-span-1 md:col-span-4 glass-panel rounded-2xl p-8 flex flex-col justify-center relative group">
                    <div class="flex justify-between items-end mb-4">
                        <h3 class="text-xs font-bold text-slate-500 uppercase tracking-widest">Progresso Global</h3>
                        <span class="text-4xl font-mono text-white font-bold">{{ project?.progresso_percentual }}%</span>
                    </div>
                    
                    <div class="h-2 w-full bg-void-900 rounded-full overflow-hidden border border-white/5">
                        <div class="h-full bg-gradient-to-r from-gold-600 via-gold-400 to-white animate-pulse" 
                             :style="`width: ${project?.progresso_percentual}%`"></div>
                    </div>
                    
                    <div class="mt-4 flex gap-2 overflow-x-auto pb-2 no-scrollbar">
                         <span v-for="step in project?.fases?.organizacao?.etapas_concluidas" :key="step" 
                               class="text-[10px] px-2 py-1 bg-green-500/10 border border-green-500/20 text-green-400 rounded whitespace-nowrap">
                            <i class="ph-bold ph-check"></i> {{ step.split(' ')[0] }}
                         </span>
                    </div>
                </div>

                <div class="col-span-1 md:col-span-4 glass-panel rounded-2xl p-1 relative overflow-hidden">
                    <div class="absolute inset-0 bg-gold-500/10 animate-pulse-slow"></div>
                    <div class="bg-void-900/90 h-full w-full rounded-xl p-7 relative z-10 flex flex-col justify-center">
                        <h3 class="text-xs font-bold text-cyber-400 uppercase tracking-widest mb-3 flex items-center gap-2">
                            <i class="ph-bold ph-arrow-circle-right"></i> Próxima Ação Permitida
                        </h3>
                        <div class="text-xl text-white font-medium font-serif leading-tight">
                            "{{ project?.proxima_acao }}"
                        </div>
                    </div>
                </div>
            </section>

            <section>
                <div class="flex items-center gap-3 mb-6">
                    <span class="w-1 h-6 bg-gold-500 rounded-full"></span>
                    <h2 class="text-xl font-serif text-white tracking-wide">Arquitetura Conceitual</h2>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="glass-panel p-6 rounded-xl border-l-4 border-l-purple-500 hover:bg-white/5 transition-colors">
                        <div class="flex items-start justify-between mb-4">
                            <div class="p-3 bg-purple-500/10 rounded-lg text-purple-400">
                                <i class="ph-duotone ph-map-trifold text-3xl"></i>
                            </div>
                            <span class="text-[10px] font-bold bg-purple-500/20 text-purple-300 px-2 py-1 rounded uppercase">Estratégia</span>
                        </div>
                        <h3 class="text-2xl font-serif text-white mb-2">ORACULUM</h3>
                        <p class="text-sm text-slate-400 leading-relaxed">
                            O mapa mestre. Não é um software, é o <strong>Conceito Abstrato</strong> do plano perfeito. Define o "O QUE" e o "PORQUÊ". É a autoridade máxima estratégica que guia todas as fases.
                        </p>
                    </div>

                    <div class="glass-panel p-6 rounded-xl border-l-4 border-l-gold-500 hover:bg-white/5 transition-colors">
                        <div class="flex items-start justify-between mb-4">
                            <div class="p-3 bg-gold-500/10 rounded-lg text-gold-400">
                                <i class="ph-duotone ph-cpu text-3xl"></i>
                            </div>
                            <span class="text-[10px] font-bold bg-gold-500/20 text-gold-300 px-2 py-1 rounded uppercase">Governança</span>
                        </div>
                        <h3 class="text-2xl font-serif text-white mb-2">ORION</h3>
                        <p class="text-sm text-slate-400 leading-relaxed">
                            O sistema operacional. É a <strong>Ferramenta Tática</strong> que você está usando agora. Ele organiza arquivos, monitora o progresso e garante que o AutNew siga o mapa do Oraculum.
                        </p>
                    </div>
                </div>
            </section>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                
                <div class="lg:col-span-2 glass-panel rounded-2xl p-8">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-lg font-serif text-white flex items-center gap-2">
                            <i class="ph-duotone ph-files text-gold-500"></i> Inventário AutNew
                        </h2>
                        <span class="text-xs font-mono text-slate-500">{{ inventory.length }} arquivos rastreados</span>
                    </div>

                    <div class="overflow-x-auto">
                        <table class="w-full text-left border-collapse">
                            <thead>
                                <tr class="text-[10px] uppercase text-slate-500 border-b border-white/5">
                                    <th class="pb-3 pl-2">Tipo</th>
                                    <th class="pb-3">Arquivo (Path Canônico)</th>
                                    <th class="pb-3 text-right">Modificado</th>
                                </tr>
                            </thead>
                            <tbody class="text-sm text-slate-300">
                                <tr v-for="file in inventory" :key="file.path" class="border-b border-white/5 hover:bg-white/5 transition-colors group">
                                    <td class="py-3 pl-2">
                                        <i :class="getFileIcon(file.extension)" class="text-lg opacity-70 group-hover:opacity-100 transition-opacity"></i>
                                    </td>
                                    <td class="py-3 font-mono text-xs">
                                        <div class="truncate max-w-[300px] text-white">{{ file.nome }}</div>
                                        <div class="truncate max-w-[300px] text-[10px] text-slate-600">{{ file.path }}</div>
                                    </td>
                                    <td class="py-3 text-right text-xs font-mono text-slate-500">
                                        {{ formatDateSimple(file.last_modified) }}
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="glass-panel rounded-2xl p-6 h-fit">
                    <h2 class="text-sm font-bold text-slate-400 uppercase tracking-widest mb-6 border-b border-white/5 pb-4">
                        Histórico de Eventos
                    </h2>
                    
                    <div class="relative pl-4 space-y-8 before:absolute before:left-[19px] before:top-2 before:bottom-2 before:w-[1px] before:bg-white/10">
                        <div v-for="(event, idx) in timeline" :key="idx" class="relative pl-8 group">
                            <div class="absolute left-3 top-1.5 w-3 h-3 rounded-full border-2 border-void-900 z-10 transition-all duration-300 shadow-glow"
                                 :class="idx === 0 ? 'bg-gold-500 scale-125 shadow-[0_0_10px_#EAB308]' : 'bg-slate-700 group-hover:bg-slate-500'">
                            </div>
                            
                            <span class="text-[10px] font-mono text-gold-500/80 block mb-1">{{ formatDate(event.timestamp) }}</span>
                            <p class="text-sm text-white font-medium leading-snug group-hover:text-gold-200 transition-colors">
                                {{ event.evento }}
                            </p>
                            <span class="text-[10px] text-slate-600 mt-1 inline-block border border-white/5 px-1.5 rounded uppercase">
                                {{ event.tipo }}
                            </span>
                        </div>
                    </div>
                </div>

            </div>

        </div>

        <footer class="border-t border-white/5 py-8 mt-12 bg-void-900/50 backdrop-blur-md">
            <div class="max-w-7xl mx-auto px-8 flex flex-col md:flex-row justify-between items-center gap-4">
                <div class="flex items-center gap-3 opacity-60 hover:opacity-100 transition-opacity">
                    <i class="ph-fill ph-user-circle text-xl text-gold-500"></i>
                    <span class="font-serif text-sm tracking-widest text-white">KLEITON JATOBÁ</span>
                </div>
                
                <div class="text-center md:text-right">
                    <div class="text-[10px] text-slate-600 uppercase tracking-wider">Última Atualização do Sistema</div>
                    <div class="text-xs font-mono text-gold-500">{{ formatDate(project?.ultima_atualizacao) }}</div>
                </div>
            </div>
        </footer>

    </div>

    <script>
        const { createApp } = Vue

        createApp({
            data() {
                return {
                    loading: true,
                    project: null,
                    timeline: [],
                    inventory: []
                }
            },
            methods: {
                async loadData() {
                    try {
                        // Tenta carregar os JSONs locais
                        const [pRes, tRes, iRes] = await Promise.all([
                            fetch('data/project_state.json'),
                            fetch('data/timeline.json'),
                            fetch('data/drive_inventory.json')
                        ]);

                        if(pRes.ok) this.project = await pRes.json();
                        if(tRes.ok) this.timeline = await tRes.json();
                        if(iRes.ok) this.inventory = await iRes.json();
                        
                        // Ordenar Timeline
                        this.timeline.sort((a,b) => new Date(b.timestamp) - new Date(a.timestamp));

                    } catch (e) {
                        console.error("Modo Offline / Demo ativado devido a erro:", e);
                        // Fallback silencioso se falhar o fetch (para não ficar tela branca)
                    } finally {
                        setTimeout(() => this.loading = false, 1500); // Delay cinemático
                    }
                },
                formatDate(iso) {
                    if(!iso) return '---';
                    return new Date(iso).toLocaleString('pt-BR', { 
                        day:'2-digit', month:'2-digit', hour:'2-digit', minute:'2-digit' 
                    });
                },
                formatDateSimple(iso) {
                    if(!iso) return '-';
                    return new Date(iso).toLocaleDateString('pt-BR');
                },
                getFileIcon(ext) {
                    const map = {
                        'pdf': 'ph-file-pdf text-red-400',
                        'json': 'ph-file-code text-yellow-400',
                        'gdoc': 'ph-file-doc text-blue-400',
                        'xlsx': 'ph-file-xls text-green-400',
                        'csv': 'ph-file-csv text-green-300'
                    }
                    return map[ext] || 'ph-file text-slate-400';
                }
            },
            mounted() {
                this.loadData();
            }
        }).mount('#app')
    </script>
</body>
</html>
