<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ORION V6 | Etherius Console</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Rajdhani:wght@300;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script src="orion_db.js" onerror="console.warn('DB não encontrado. Usando Fallback.')"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        void: '#000000',
                        deep: '#030712', // Navy bem escuro
                        glass: 'rgba(255, 255, 255, 0.03)',
                        gold: '#FFD700',
                        cyan: '#00F0FF',
                        danger: '#FF2A6D',
                        success: '#05FFA1'
                    },
                    fontFamily: {
                        serif: ['Cinzel', 'serif'],
                        tech: ['Rajdhani', 'sans-serif'], // Fonte Sci-Fi
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    backgroundImage: {
                        'noise': "url('data:image/svg+xml,%3Csvg viewBox=\"0 0 200 200\" xmlns=\"http://www.w3.org/2000/svg\"%3E%3Cfilter id=\"noiseFilter\"%3E%3CfeTurbulence type=\"fractalNoise\" baseFrequency=\"0.65\" numOctaves=\"3\" stitchTiles=\"stitch\"/%3E%3C/filter%3E%3Crect width=\"100%25\" height=\"100%25\" filter=\"url(%23noiseFilter)\" opacity=\"0.05\"/%3E%3C/svg%3E')",
                    }
                }
            }
        }
    </script>

    <style>
        /* --- CORE VISUALS --- */
        body {
            background-color: #000;
            color: #e2e8f0;
            overflow: hidden;
            font-family: 'Rajdhani', sans-serif;
        }

        /* Efeito de Partículas (Canvas ficará atrás) */
        #nebula-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
        }

        /* Scanline CRT Effect */
        .scanlines {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.1) 50%, rgba(0,0,0,0.1));
            background-size: 100% 4px;
            z-index: 999; pointer-events: none; opacity: 0.3;
        }

        /* GLASS FILM CARD (A Película de Vidro) */
        .glass-panel {
            background: rgba(10, 15, 30, 0.6); /* Base escura translúcida */
            backdrop-filter: blur(20px);         /* Blur pesado */
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08); /* Borda sutil */
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);   /* Sombra profunda */
            position: relative;
            overflow: hidden;
        }
        
        /* Borda Brilhante Superior (Reflexo de Luz) */
        .glass-panel::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
        }

        /* Ruído de Textura (Realismo) */
        .texture-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url('data:image/svg+xml,%3Csvg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"%3E%3Cfilter id="noiseFilter"%3E%3CfeTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="3" stitchTiles="stitch"/%3E%3C/filter%3E%3Crect width="100%25" height="100%25" filter="url(%23noiseFilter)" opacity="0.07"/%3E%3C/svg%3E');
            pointer-events: none; opacity: 0.4; mix-blend-mode: overlay;
        }

        /* Scrollbar Cyberpunk */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { background: #333; }
        ::-webkit-scrollbar-thumb:hover { background: #FFD700; }

        /* Animações */
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
        .animate-float { animation: float 6s ease-in-out infinite; }
        
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }
        .blink { animation: blink 2s infinite; }

        .text-glow-gold { text-shadow: 0 0 10px rgba(255, 215, 0, 0.6); }
        .text-glow-cyan { text-shadow: 0 0 10px rgba(0, 240, 255, 0.6); }

        .nav-btn { position: relative; overflow: hidden; transition: all 0.3s; }
        .nav-btn.active { background: rgba(255, 215, 0, 0.1); border-left: 2px solid #FFD700; color: #fff; }
        .nav-btn:hover:not(.active) { background: rgba(255, 255, 255, 0.05); }

    </style>
</head>
<body class="flex flex-col h-screen antialiased">

    <canvas id="nebula-canvas"></canvas>
    <div class="scanlines"></div>

    <header class="h-12 border-b border-white/10 bg-black/40 backdrop-blur-md flex justify-between items-center px-6 z-50">
        <div class="flex items-center gap-6">
            <div class="flex items-center gap-2">
                <i class="fa-solid fa-diamond text-gold text-xs animate-spin" style="animation-duration: 10s;"></i>
                <span class="font-serif text-gold tracking-[0.2em] font-bold text-lg text-glow-gold">ORION</span>
            </div>
            <div class="h-4 w-px bg-white/10"></div>
            <div class="text-[10px] font-mono text-cyan tracking-wider flex gap-2">
                <span>SYS.V6.ETHERIUS</span>
                <span class="text-slate-500">|</span>
                <span>SECURE_CONN</span>
            </div>
        </div>
        
        <div class="flex items-center gap-8 text-[10px] font-mono uppercase text-slate-400">
            <div class="flex gap-2 items-center">
                <span>CPU</span>
                <div class="w-16 h-1 bg-slate-800"><div class="h-full bg-cyan w-[12%] animate-pulse"></div></div>
                <span class="text-cyan">12%</span>
            </div>
            <div class="flex gap-2 items-center">
                <span>MEM</span>
                <div class="w-16 h-1 bg-slate-800"><div class="h-full bg-gold w-[45%]"></div></div>
                <span class="text-gold">4.2GB</span>
            </div>
            <div class="text-right">
                <span id="system-clock" class="text-white font-bold">00:00:00</span>
            </div>
        </div>
    </header>

    <div class="flex flex-1 overflow-hidden z-10">
        
        <aside class="w-16 flex flex-col items-center py-6 gap-6 border-r border-white/5 bg-black/20 backdrop-blur-sm">
            <button onclick="switchView('main')" id="nav-main" class="nav-btn w-10 h-10 rounded flex items-center justify-center text-slate-400 hover:text-gold active" title="Comando Central">
                <i class="fa-solid fa-grid-2 text-xl"></i>
            </button>
            <button onclick="switchView('data')" id="nav-data" class="nav-btn w-10 h-10 rounded flex items-center justify-center text-slate-400 hover:text-cyan" title="Inventário">
                <i class="fa-solid fa-database text-xl"></i>
            </button>
            <button onclick="switchView('audit')" id="nav-audit" class="nav-btn w-10 h-10 rounded flex items-center justify-center text-slate-400 hover:text-success" title="Auditoria">
                <i class="fa-solid fa-list-check text-xl"></i>
            </button>
            <div class="mt-auto flex flex-col gap-4">
                <div class="w-8 h-8 rounded-full border border-white/10 bg-gold/10 flex items-center justify-center text-gold font-serif text-xs">A</div>
            </div>
        </aside>

        <main class="flex-1 overflow-y-auto p-6 relative">
            
            <div id="view-main" class="space-y-6 opacity-100 transition-opacity duration-500">
                
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                    <div class="glass-panel rounded-xl p-5 hover:border-gold/30 transition-colors group">
                        <div class="texture-overlay"></div>
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="text-slate-400 text-[10px] font-mono uppercase tracking-widest">Fase Atual</h3>
                                <div class="text-2xl font-bold text-white mt-1 group-hover:text-gold transition-colors">1. ORGANIZAÇÃO</div>
                            </div>
                            <i class="fa-solid fa-layer-group text-gold/50 group-hover:text-gold group-hover:scale-110 transition-transform"></i>
                        </div>
                        <div class="relative pt-2">
                            <div class="flex justify-between text-[10px] text-slate-400 mb-1"><span>Progresso</span><span>62.5%</span></div>
                            <div class="w-full h-1 bg-white/5 rounded-full overflow-hidden">
                                <div class="h-full bg-gradient-to-r from-yellow-600 to-gold w-[62.5%] shadow-[0_0_10px_#FFD700]"></div>
                            </div>
                        </div>
                    </div>

                    <div class="glass-panel rounded-xl p-5 hover:border-cyan/30 transition-colors group">
                        <div class="texture-overlay"></div>
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="text-slate-400 text-[10px] font-mono uppercase tracking-widest">Inventário</h3>
                                <div class="text-2xl font-bold text-white mt-1 group-hover:text-cyan transition-colors" id="kpi-files">5,114</div>
                            </div>
                            <i class="fa-solid fa-hard-drive text-cyan/50 group-hover:text-cyan group-hover:scale-110 transition-transform"></i>
                        </div>
                         <div class="flex gap-2 mt-3">
                            <span class="px-2 py-0.5 rounded bg-cyan/10 border border-cyan/20 text-[9px] text-cyan font-mono">DRIVE</span>
                            <span class="px-2 py-0.5 rounded bg-slate-800 border border-white/5 text-[9px] text-slate-400 font-mono">LOCAL</span>
                        </div>
                    </div>

                    <div class="glass-panel rounded-xl p-5 hover:border-danger/30 transition-colors group">
                        <div class="texture-overlay"></div>
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="text-slate-400 text-[10px] font-mono uppercase tracking-widest">Core Status</h3>
                                <div class="text-2xl font-bold text-danger mt-1">INEXISTENTE</div>
                            </div>
                            <i class="fa-solid fa-lock text-danger/50 group-hover:text-danger group-hover:scale-110 transition-transform"></i>
                        </div>
                        <div class="text-[10px] text-slate-500 mt-2 font-mono border-l-2 border-danger pl-2">
                            Aguardando conclusão da Fase 3 para geração do Snapshot.
                        </div>
                    </div>

                    <div class="glass-panel rounded-xl p-5 hover:border-success/30 transition-colors group">
                        <div class="texture-overlay"></div>
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="text-slate-400 text-[10px] font-mono uppercase tracking-widest">Saúde Sistema</h3>
                                <div class="text-2xl font-bold text-success mt-1">ONLINE</div>
                            </div>
                            <i class="fa-solid fa-heart-pulse text-success/50 group-hover:text-success group-hover:scale-110 transition-transform"></i>
                        </div>
                        <div class="flex items-center gap-2 mt-2">
                             <div class="w-2 h-2 bg-success rounded-full animate-pulse"></div>
                             <span class="text-[10px] text-slate-400">Todos os módulos operacionais</span>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 h-96">
                    
                    <div class="glass-panel rounded-xl p-6 col-span-2 flex flex-col">
                        <div class="texture-overlay"></div>
                        <h3 class="font-serif text-white border-b border-white/5 pb-2 mb-4 flex items-center gap-2">
                            <i class="fa-solid fa-chart-area text-gold"></i> Distribuição de Dados
                        </h3>
                        <div class="flex-1 relative w-full h-full">
                            <canvas id="mainChart"></canvas>
                        </div>
                    </div>

                    <div class="glass-panel rounded-xl p-0 flex flex-col bg-black/80 font-mono text-xs border-l-4 border-l-gold">
                        <div class="p-3 bg-white/5 border-b border-white/5 flex justify-between items-center">
                            <span class="text-gold font-bold">TERMINAL: ORION_LOGS</span>
                            <div class="flex gap-1">
                                <div class="w-2 h-2 rounded-full bg-red-500"></div>
                                <div class="w-2 h-2 rounded-full bg-yellow-500"></div>
                                <div class="w-2 h-2 rounded-full bg-green-500"></div>
                            </div>
                        </div>
                        <div class="flex-1 p-4 overflow-y-auto space-y-2 text-slate-400" id="terminal-content">
                            </div>
                        <div class="p-2 border-t border-white/10 bg-white/5">
                            <span class="text-success">➜</span> <span class="text-white animate-pulse">_</span>
                        </div>
                    </div>
                </div>
            </div>

            <div id="view-data" class="hidden space-y-6">
                <div class="glass-panel rounded-xl p-6 min-h-[80vh]">
                    <div class="texture-overlay"></div>
                    
                    <div class="flex justify-between items-end mb-6">
                        <div>
                            <h2 class="text-3xl font-serif text-white">Inventário Global</h2>
                            <p class="text-sm text-slate-500 font-mono mt-1">Indexação de Arquivos: Drive & Local</p>
                        </div>
                        <div class="relative">
                            <input type="text" id="search-box" onkeyup="filterData()" placeholder="SEARCH_DATABASE..." 
                                class="bg-black/50 border border-white/20 rounded text-sm px-4 py-2 w-64 text-cyan focus:border-cyan focus:outline-none font-mono placeholder-slate-700">
                            <i class="fa-solid fa-search absolute right-3 top-3 text-slate-600 text-xs"></i>
                        </div>
                    </div>

                    <div class="overflow-x-auto">
                        <table class="w-full text-left border-collapse">
                            <thead class="text-[10px] uppercase font-mono text-slate-500 border-b border-white/10 bg-white/5">
                                <tr>
                                    <th class="p-4">Arquivo</th>
                                    <th class="p-4">Tipo</th>
                                    <th class="p-4">Caminho</th>
                                    <th class="p-4 text-right">Ação</th>
                                </tr>
                            </thead>
                            <tbody class="text-sm font-tech text-slate-300 divide-y divide-white/5" id="table-body">
                                </tbody>
                        </table>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <script>
        // --- 1. PARTICLES ENGINE (NEBULA) ---
        const canvas = document.getElementById('nebula-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const particles = [];
        const particleCount = 60; // Quantidade de partículas

        class Particle {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.size = Math.random() * 2;
                this.speedX = (Math.random() * 0.5) - 0.25;
                this.speedY = (Math.random() * 0.5) - 0.25;
                this.color = Math.random() > 0.5 ? 'rgba(0, 240, 255,' : 'rgba(255, 215, 0,'; 
            }
            update() {
                this.x += this.speedX;
                this.y += this.speedY;
                if (this.size > 0.2) this.size -= 0.005; // Twinkle effect
                else this.size += 0.05;

                if (this.x < 0 || this.x > canvas.width) this.speedX *= -1;
                if (this.y < 0 || this.y > canvas.height) this.speedY *= -1;
            }
            draw() {
                ctx.fillStyle = this.color + (Math.random() * 0.5 + 0.2) + ')';
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        for(let i=0; i<particleCount; i++) particles.push(new Particle());

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            for(let i=0; i<particles.length; i++) {
                particles[i].update();
                particles[i].draw();
            }
            requestAnimationFrame(animate);
        }
        animate();

        // --- 2. DATA HANDLER ---
        const DEFAULT_DB = {
            kpis: { progresso: 62.5, arquivos: 5114 },
            arquivos_recentes: [
                { nome: "Orion_Estado_Canonico.pdf", tipo: "PDF", caminho: "/AutNew/ORACULUM/" },
                { nome: "core_oraculum.json", tipo: "JSON", caminho: "/AutNew/ORION/data/" },
                { nome: "LOG_TECNICO.md", tipo: "MD", caminho: "/AutNew/__LOGS__/" }
            ],
            timeline: [
                { time: "14:02", text: "Inventário Global finalizado com sucesso.", type: "SUCCESS" },
                { time: "13:55", text: "Estado Canônico definido como TRAVADO.", type: "WARN" },
                { time: "11:00", text: "Inicialização do Sistema ORION V6.", type: "INFO" }
            ],
            stats: [4949, 25, 33, 107]
        };

        const DB = window.ORION_DB || DEFAULT_DB;

        // --- 3. UI LOGIC ---
        
        // Clock
        setInterval(() => {
            document.getElementById('system-clock').innerText = new Date().toLocaleTimeString('pt-BR');
        }, 1000);

        // Populate Data
        document.getElementById('kpi-files').innerText = DB.kpis.arquivos.toLocaleString();

        // Populate Terminal
        const term = document.getElementById('terminal-content');
        DB.timeline.forEach(log => {
            const color = log.type === 'SUCCESS' ? 'text-green-400' : (log.type === 'WARN' ? 'text-gold' : 'text-blue-400');
            term.innerHTML += `
                <div class="font-mono border-l-2 border-white/10 pl-2 mb-2 hover:bg-white/5 transition-colors">
                    <span class="text-slate-600">[${log.time}]</span> 
                    <span class="${color}">${log.type}:</span> 
                    ${log.text}
                </div>
            `;
        });

        // Populate Table
        const table = document.getElementById('table-body');
        DB.arquivos_recentes.forEach(file => {
            table.innerHTML += `
                <tr class="hover:bg-white/5 transition-colors group file-row">
                    <td class="p-4 font-bold text-white group-hover:text-gold transition-colors">${file.nome}</td>
                    <td class="p-4"><span class="px-2 py-1 rounded border border-white/10 bg-black text-[10px] text-slate-400">${file.tipo}</span></td>
                    <td class="p-4 font-mono text-xs text-slate-500">${file.caminho}</td>
                    <td class="p-4 text-right"><button class="text-cyan hover:text-white transition-colors text-xs uppercase font-bold tracking-wider">Abrir <i class="fa-solid fa-arrow-right"></i></button></td>
                </tr>
            `;
        });

        // Filter Function
        function filterData() {
            const val = document.getElementById('search-box').value.toLowerCase();
            const rows = document.querySelectorAll('.file-row');
            rows.forEach(row => {
                const text = row.innerText.toLowerCase();
                row.style.display = text.includes(val) ? '' : 'none';
            });
        }

        // View Switcher
        function switchView(viewName) {
            document.getElementById('view-main').classList.add('hidden');
            document.getElementById('view-data').classList.add('hidden');
            document.getElementById('view-' + viewName).classList.remove('hidden');

            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('nav-' + viewName).classList.add('active');
        }

        // --- 4. CHART ---
        const ctxChart = document.getElementById('mainChart').getContext('2d');
        const gradient = ctxChart.createLinearGradient(0, 0, 0, 300);
        gradient.addColorStop(0, 'rgba(0, 240, 255, 0.4)');
        gradient.addColorStop(1, 'rgba(0, 0, 0, 0)');

        new Chart(ctxChart, {
            type: 'line',
            data: {
                labels: ['MD', 'JSON', 'PY', 'DOCS', 'IMGS'],
                datasets: [{
                    label: 'Densidade de Arquivos',
                    data: DB.stats || [10, 20, 30, 40, 50],
                    borderColor: '#00F0FF',
                    backgroundColor: gradient,
                    borderWidth: 2,
                    pointBackgroundColor: '#000',
                    pointBorderColor: '#FFD700',
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: {
                    y: { grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { color: '#64748b' } },
                    x: { grid: { display: false }, ticks: { color: '#64748b' } }
                }
            }
        });

    </script>
</body>
</html>
