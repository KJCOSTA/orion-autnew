<!DOCTYPE html>
<html lang="pt-BR" class="dark">
<head>
<meta charset="UTF-8">
<title>ORION ‚Ä¢ Command Center</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<script src="https://unpkg.com/@phosphor-icons/web"></script>

<script>
tailwind.config = {
  darkMode: 'class',
  theme: {
    fontFamily: {
      sans: ['"Plus Jakarta Sans"', 'sans-serif'],
      serif: ['Cinzel', 'serif']
    },
    extend: {
      colors: {
        void: { 900:'#020617', 800:'#0F172A' },
        gold: { 500:'#EAB308' },
        neon: { 400:'#38BDF8' }
      }
    }
  }
}
</script>

<style>
.glass {
  background: rgba(15,23,42,.6);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(255,255,255,.05);
}
</style>
</head>

<body class="bg-void-900 text-slate-300 font-sans min-h-screen">

<div id="app" class="max-w-7xl mx-auto p-6 space-y-10">

<!-- LOADING -->
<div v-if="loading" class="fixed inset-0 flex items-center justify-center bg-void-900 z-50">
  <div class="animate-pulse text-gold-500 font-serif">CARREGANDO ORION‚Ä¶</div>
</div>

<!-- HEADER -->
<header class="flex justify-between items-center border-b border-white/5 pb-6">
  <div>
    <h1 class="text-4xl font-serif text-white flex items-center gap-2">
      <i class="ph-fill ph-sparkle text-gold-500"></i> ORION
    </h1>
    <p class="text-xs uppercase tracking-widest text-slate-400">
      Command Center ‚Ä¢ Gest√£o & Consci√™ncia do AutNew
    </p>
  </div>

  <div class="text-right">
    <div class="text-xs text-slate-500">Status</div>
    <div class="text-sm font-bold" :class="project?.status==='Erro'?'text-red-400':'text-green-400'">
      {{ project?.status || 'ONLINE' }}
    </div>
  </div>
</header>

<!-- HERO -->
<section class="grid grid-cols-1 md:grid-cols-4 gap-4">
  <div class="glass rounded-xl p-5">
    <div class="text-xs uppercase text-slate-500">Fase Atual</div>
    <div class="text-xl text-white font-serif">{{ project?.fase_atual }}</div>
  </div>
  <div class="glass rounded-xl p-5">
    <div class="text-xs uppercase text-slate-500">Progresso</div>
    <div class="text-2xl font-mono text-white">{{ project?.progresso_percentual }}%</div>
  </div>
  <div class="glass rounded-xl p-5">
    <div class="text-xs uppercase text-slate-500">CORE</div>
    <div class="font-bold" :class="project?.core_existe?'text-green-400':'text-slate-400'">
      {{ project?.core_existe ? 'EXISTENTE' : 'EM CONSTRU√á√ÉO' }}
    </div>
  </div>
  <div class="glass rounded-xl p-5 border border-gold-500/30">
    <div class="text-xs uppercase text-gold-500">Pr√≥ximo Passo</div>
    <div class="text-white">{{ project?.proxima_acao }}</div>
  </div>
</section>

<!-- CONTENT -->
<div class="grid grid-cols-1 lg:grid-cols-3 gap-8">

<!-- TIMELINE -->
<section class="lg:col-span-2 glass rounded-xl p-6">
  <h2 class="text-lg font-serif text-white mb-4">Linha do Tempo</h2>
  <div class="space-y-4">
    <div v-for="e in timeline" class="border-l-2 border-gold-500 pl-4">
      <div class="text-xs text-gold-500">{{ formatDate(e.timestamp) }} ‚Ä¢ {{ e.tipo }}</div>
      <div class="text-sm text-white">{{ e.evento }}</div>
    </div>
  </div>
</section>

<!-- ASSETS -->
<section class="glass rounded-xl p-6">
  <h2 class="text-lg font-serif text-white mb-4">Patrim√¥nio AutNew</h2>

  <div class="mb-4">
    <div class="text-sm text-gold-500 font-bold mb-2">üìÑ Documentos Aprovados (ORION)</div>
    <ul class="text-sm space-y-1">
      <li v-for="f in approvedDocs" class="text-green-400 truncate">
        <i class="ph ph-file-pdf"></i> {{ f.path }}
      </li>
    </ul>
  </div>

  <div>
    <div class="text-sm text-slate-400 font-bold mb-2">üìÅ Outros Arquivos</div>
    <div class="text-xs text-slate-500">
      {{ otherFiles.length }} arquivos inventariados no AutNew
    </div>
  </div>
</section>

</div>
</div>

<script>
const { createApp } = Vue

createApp({
  data(){
    return {
      loading:true,
      project:null,
      timeline:[],
      inventory:[]
    }
  },
  computed:{
    approvedDocs(){
      return this.inventory.filter(f =>
        f.path.includes('/ORION/docs') &&
        f.path.toLowerCase().endsWith('.pdf')
      )
    },
    otherFiles(){
      return this.inventory.filter(f => !f.path.includes('/ORION/docs'))
    }
  },
  methods:{
    async load(){
      try{
        const base = `${location.origin}${location.pathname.replace(/\/$/, '')}`
        const [p,t,i] = await Promise.all([
          fetch(`${base}/data/project_state.json`),
          fetch(`${base}/data/timeline.json`),
          fetch(`${base}/data/drive_inventory.json`)
        ])

        if(!p.ok||!t.ok||!i.ok) throw 'Erro de fetch'

        this.project = await p.json()
        this.timeline = (await t.json()).reverse()
        this.inventory = await i.json()

      }catch(e){
        this.project={
          fase_atual:'Erro de Conex√£o',
          progresso_percentual:0,
          proxima_acao:'Verificar JSON em /data',
          status:'Erro'
        }
      }finally{
        this.loading=false
      }
    },
    formatDate(ts){
      if(!ts) return '--'
      return new Intl.DateTimeFormat('pt-BR',{day:'2-digit',month:'2-digit'}).format(new Date(ts))
    }
  },
  mounted(){
    this.load()
  }
}).mount('#app')
</script>

</body>
</html>
